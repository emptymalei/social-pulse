import{s as Se,b as be,j as Oe,f as Ee,l as qe,q as He,I as Ne,K as ae,L as ye,v as ke,z as Ae,A as Me,B as ze}from"./scheduler.DtxdbRBG.js";import{S as Ce,i as we,g as Fe,b,e as Te,t as y,c as E,a as q,m as H,d as N}from"./index.DqNKgMaH.js";import{h as We,l as Ge,m as Pe,n as Qe,o as je,q as Y,t as De,u as Ve,Q as ne,v as Be,w as Re,x as Ye}from"./VennDiagram.svelte_svelte_type_style_lang.Dzt2qEFG.js";import{E as Ke}from"./ECharts.BTk0qCaj.js";function Ue(o){let t,r;return t=new Ke({props:{height:o[11],data:o[1],queryID:o[2],config:o[10],printEchartsConfig:o[0],renderer:o[5],downloadableData:o[6],downloadableImage:o[7],connectGroup:o[8],echartsOptions:o[3],seriesOptions:o[4]}}),{c(){E(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){H(t,e,a),r=!0},p(e,a){const n={};a[0]&2048&&(n.height=e[11]),a[0]&2&&(n.data=e[1]),a[0]&4&&(n.queryID=e[2]),a[0]&1024&&(n.config=e[10]),a[0]&1&&(n.printEchartsConfig=e[0]),a[0]&32&&(n.renderer=e[5]),a[0]&64&&(n.downloadableData=e[6]),a[0]&128&&(n.downloadableImage=e[7]),a[0]&256&&(n.connectGroup=e[8]),a[0]&8&&(n.echartsOptions=e[3]),a[0]&16&&(n.seriesOptions=e[4]),t.$set(n)},i(e){r||(y(t.$$.fragment,e),r=!0)},o(e){b(t.$$.fragment,e),r=!1},d(e){N(t,e)}}}function Je(o){let t,r;return t=new De({props:{title:"Calendar Heatmap",error:o[9]}}),{c(){E(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){H(t,e,a),r=!0},p(e,a){const n={};a[0]&512&&(n.error=e[9]),t.$set(n)},i(e){r||(y(t.$$.fragment,e),r=!0)},o(e){b(t.$$.fragment,e),r=!1},d(e){N(t,e)}}}function Xe(o){let t,r,e,a;const n=[Je,Ue],i=[];function d(u,m){return u[9]?0:1}return t=d(o),r=i[t]=n[t](o),{c(){r.c(),e=be()},l(u){r.l(u),e=be()},m(u,m){i[t].m(u,m),Oe(u,e,m),a=!0},p(u,m){let c=t;t=d(u),t===c?i[t].p(u,m):(Fe(),b(i[c],1,1,()=>{i[c]=null}),Te(),r=i[t],r?r.p(u,m):(r=i[t]=n[t](u),r.c()),y(r,1),r.m(e.parentNode,e))},i(u){a||(y(r),a=!0)},o(u){b(r),a=!1},d(u){u&&Ee(e),i[t].d(u)}}}function _e(o,t,r){return o.map(e=>[new Date(e[t]).toISOString().split("T")[0],e[r]])}function Ze(o,t,r){let e,a,n,i=He,d=()=>(i(),i=Ne(e,l=>r(42,n=l)),e);o.$$.on_destroy.push(()=>i());const{theme:u,resolveColorScale:m}=We();qe(o,u,l=>r(41,a=l));let{data:c}=t,{queryID:M}=t,{date:f}=t,{value:h}=t,{valueFmt:z=void 0}=t,{yearLabel:g=!0}=t,{monthLabel:S=!0}=t,{dayLabel:C=!0}=t,{chartAreaHeight:_=void 0}=t,{title:F=void 0}=t,{subtitle:T=void 0}=t,oe=F!==void 0,le=T!==void 0,{legend:w=!0}=t,{filter:D=!1}=t,ie="400px",W,{colorPalette:K=void 0}=t,{colorScale:U=void 0}=t,{echartsOptions:se=void 0}=t,{seriesOptions:ue=void 0}=t,{printEchartsConfig:k=!1}=t,{renderer:fe=void 0}=t,{downloadableData:ce=void 0}=t,{downloadableImage:me=void 0}=t,{connectGroup:de=void 0}=t,J,X,I,Z,x,G,P,Q,p,v,j=[],V=[],$,{min:L=void 0}=t,{max:O=void 0}=t;return o.$$set=l=>{"data"in l&&r(1,c=l.data),"queryID"in l&&r(2,M=l.queryID),"date"in l&&r(22,f=l.date),"value"in l&&r(23,h=l.value),"valueFmt"in l&&r(24,z=l.valueFmt),"yearLabel"in l&&r(14,g=l.yearLabel),"monthLabel"in l&&r(15,S=l.monthLabel),"dayLabel"in l&&r(16,C=l.dayLabel),"chartAreaHeight"in l&&r(17,_=l.chartAreaHeight),"title"in l&&r(25,F=l.title),"subtitle"in l&&r(26,T=l.subtitle),"legend"in l&&r(18,w=l.legend),"filter"in l&&r(19,D=l.filter),"colorPalette"in l&&r(27,K=l.colorPalette),"colorScale"in l&&r(28,U=l.colorScale),"echartsOptions"in l&&r(3,se=l.echartsOptions),"seriesOptions"in l&&r(4,ue=l.seriesOptions),"printEchartsConfig"in l&&r(0,k=l.printEchartsConfig),"renderer"in l&&r(5,fe=l.renderer),"downloadableData"in l&&r(6,ce=l.downloadableData),"downloadableImage"in l&&r(7,me=l.downloadableImage),"connectGroup"in l&&r(8,de=l.connectGroup),"min"in l&&r(20,L=l.min),"max"in l&&r(21,O=l.max)},o.$$.update=()=>{if(o.$$.dirty[0]&16384&&r(14,g=g==="true"||g===!0),o.$$.dirty[0]&32768&&r(15,S=S==="true"||S===!0),o.$$.dirty[0]&65536&&r(16,C=C==="true"||C===!0),o.$$.dirty[0]&262144&&r(18,w=w==="true"||w===!0),o.$$.dirty[0]&524288&&r(19,D=D==="true"||D===!0),o.$$.dirty[0]&402653184&&d(r(12,e=m(U??K??"default"))),o.$$.dirty[0]&1&&r(0,k=k==="true"||k===!0),o.$$.dirty[0]&1744815618|o.$$.dirty[1]&4095)try{Ge(c,[f,h]);const l=c.map(s=>({...s,year:new Date(s[f]).getUTCFullYear()})),B=[...new Set(l.map(s=>s.year))],Le=B.length;if(r(30,J=_e(c,f,h)),L&&(r(20,L=Number(L)),isNaN(L)))throw Error("min must be a number");if(O&&(r(21,O=Number(O)),isNaN(O)))throw Error("max must be a number");if(r(34,G=L??Math.min(...c.map(s=>s[h]))),r(35,P=O??Math.max(...c.map(s=>s[h]))),r(33,Z=Pe(c)),r(31,X=Z[h].format),r(32,I=z?Qe(z):X),_){if(r(17,_=Number(_)),isNaN(_))throw Error("chartAreaHeight must be a number");if(_<=0)throw Error("chartAreaHeight must be a positive number")}r(29,W=_??Math.max(100,B.length*135)),r(11,ie=`${0+w*35+oe*18+le*18+W}px`),r(36,p={type:"heatmap",coordinateSystem:"calendar",data:J,emphasis:{itemStyle:{shadowBlur:2,shadowColor:"rgba(0, 0, 0, 0.5)"}}}),r(37,v={left:g?40:20,right:5,cellSize:["auto",13],itemStyle:{color:a.colors["base-100"],borderWidth:.5,borderColor:a.colors["base-300"]},splitLine:{show:!0,lineStyle:{color:a.colors["base-content"]}},monthLabel:{show:S,color:a.colors["base-content-muted"]},dayLabel:{show:C,color:a.colors["base-content-muted"]},yearLabel:{show:g,color:a.colors["base-300"],fontSize:16,fontWeight:600,margin:25}});for(let s=0;s<Le;s++){s===0&&(r(39,V=[]),r(38,j=[]));const A=_e(l.filter(re=>re.year===B[s]),f,h),ee={...p};ee.data=A,ee.calendarIndex=s;const te={...v};let he=A[0][0],ge=A[0][0];A.forEach(re=>{const R=re[0];R<he&&(he=R),R>ge&&(ge=R)}),te.range=B[s],te.top=oe*20+le*20+25+s*135,V.push(ee),j.push(te)}r(10,Q={title:{text:F,subtext:T},animation:!1,grid:{height:W},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2,confine:!0,axisPointer:{type:"shadow"},formatter(s){return`
					<span id="tooltip" style='font-weight: 600;'>${s.value[0]}</span>
						<br/>
						<span>${je(h,I)}: </span>
							<span style='float:right; margin-left: 10px;'>${Y(Number.isNaN(s.value[1])?0:s.value[1],I)}</span>`},padding:6,borderRadius:4,borderWidth:1,borderColor:a.colors["base-300"],backgroundColor:a.colors["base-100"],extraCssText:"box-shadow: 0 3px 6px rgba(0,0,0,.15); box-shadow: 0 2px 4px rgba(0,0,0,.12); z-index: 1;",textStyle:{color:a.colors["base-content"],fontSize:12,fontWeight:400},order:"valueDesc"},calendar:j,visualMap:{show:w,itemWidth:10,min:G,max:P,calculable:D,orient:"horizontal",left:"center",bottom:10,handleStyle:{borderColor:a.colors["base-100"]},textStyle:{color:a.colors["base-content-muted"]},inRange:{color:n},text:D?void 0:[Y(P,I),Y(G,I)],formatter(s){return Y(s,I)}},series:V,media:[{query:{maxWidth:400},option:{calendar:[]}}]}),r(40,$={left:g?40:20,right:5,cellSize:["auto",12],itemStyle:{borderWidth:.5,borderColor:a.colors["base-300"]},splitLine:{show:!0,lineStyle:{color:a.colors["base-content-muted"]}},monthLabel:{show:S,color:a.colors["base-content-muted"],fontSize:10,formatter(s){return s.nameMap.substring(0,1)}},dayLabel:{show:C,color:a.colors["base-content-muted"],fontSize:10,margin:7},yearLabel:{show:g,color:a.colors["base-300"],fontWeight:600,margin:25,fontSize:14}});for(let s=0;s<Q.calendar.length;s++)Q.media[0].option.calendar.push($)}catch(l){r(9,x=l.message),console.error("Error in Calendar Heatmap: "+x)}},[k,c,M,se,ue,fe,ce,me,de,x,Q,ie,e,u,g,S,C,_,w,D,L,O,f,h,z,F,T,K,U,W,J,X,I,Z,G,P,p,v,j,V,$,a,n]}class xe extends Ce{constructor(t){super(),we(this,t,Ze,Xe,Se,{data:1,queryID:2,date:22,value:23,valueFmt:24,yearLabel:14,monthLabel:15,dayLabel:16,chartAreaHeight:17,title:25,subtitle:26,legend:18,filter:19,colorPalette:27,colorScale:28,echartsOptions:3,seriesOptions:4,printEchartsConfig:0,renderer:5,downloadableData:6,downloadableImage:7,connectGroup:8,min:20,max:21},null,[-1,-1])}}function pe(o){let t;const r=o[6].default,e=ke(r,o,o[7],null);return{c(){e&&e.c()},l(a){e&&e.l(a)},m(a,n){e&&e.m(a,n),t=!0},p(a,n){e&&e.p&&(!t||n&128)&&Ae(e,r,a,a[7],t?ze(r,a[7],n,null):Me(a[7]),null)},i(a){t||(y(e,a),t=!0)},o(a){b(e,a),t=!1},d(a){e&&e.d(a)}}}function ve(o){let t,r;const e=[o[4],{data:ne.isQuery(o[10])?Array.from(o[10]):o[10]},{queryID:o[5]}];let a={$$slots:{default:[pe]},$$scope:{ctx:o}};for(let n=0;n<e.length;n+=1)a=ae(a,e[n]);return t=new xe({props:a}),{c(){E(t.$$.fragment)},l(n){q(t.$$.fragment,n)},m(n,i){H(t,n,i),r=!0},p(n,i){const d=i&1072?Be(e,[i&16&&Re(n[4]),i&1024&&{data:ne.isQuery(n[10])?Array.from(n[10]):n[10]},i&32&&{queryID:n[5]}]):{};i&128&&(d.$$scope={dirty:i,ctx:n}),t.$set(d)},i(n){r||(y(t.$$.fragment,n),r=!0)},o(n){b(t.$$.fragment,n),r=!1},d(n){N(t,n)}}}function $e(o){let t,r;return t=new Ye({props:{slot:"empty",emptyMessage:o[2],emptySet:o[1],chartType:Ie,isInitial:o[3]}}),{c(){E(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){H(t,e,a),r=!0},p(e,a){const n={};a&4&&(n.emptyMessage=e[2]),a&2&&(n.emptySet=e[1]),a&8&&(n.isInitial=e[3]),t.$set(n)},i(e){r||(y(t.$$.fragment,e),r=!0)},o(e){b(t.$$.fragment,e),r=!1},d(e){N(t,e)}}}function et(o){let t,r;return t=new De({props:{slot:"error",title:Ie,error:o[10].error.message}}),{c(){E(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){H(t,e,a),r=!0},p(e,a){const n={};a&1024&&(n.error=e[10].error.message),t.$set(n)},i(e){r||(y(t.$$.fragment,e),r=!0)},o(e){b(t.$$.fragment,e),r=!1},d(e){N(t,e)}}}function tt(o){let t,r;return t=new Ve({props:{data:o[0],$$slots:{error:[et,({loaded:e})=>({10:e}),({loaded:e})=>e?1024:0],empty:[$e],default:[ve,({loaded:e})=>({10:e}),({loaded:e})=>e?1024:0]},$$scope:{ctx:o}}}),{c(){E(t.$$.fragment)},l(e){q(t.$$.fragment,e)},m(e,a){H(t,e,a),r=!0},p(e,[a]){const n={};a&1&&(n.data=e[0]),a&1182&&(n.$$scope={dirty:a,ctx:e}),t.$set(n)},i(e){r||(y(t.$$.fragment,e),r=!0)},o(e){b(t.$$.fragment,e),r=!1},d(e){N(t,e)}}}let Ie="Calendar Heatmap";function rt(o,t,r){let e,{$$slots:a={},$$scope:n}=t,{data:i}=t;const d=ne.isQuery(i)?i.hash:void 0;let u=(i==null?void 0:i.hash)===d,{emptySet:m=void 0}=t,{emptyMessage:c=void 0}=t,M=i==null?void 0:i.id;return o.$$set=f=>{r(9,t=ae(ae({},t),ye(f))),"data"in f&&r(0,i=f.data),"emptySet"in f&&r(1,m=f.emptySet),"emptyMessage"in f&&r(2,c=f.emptyMessage),"$$scope"in f&&r(7,n=f.$$scope)},o.$$.update=()=>{o.$$.dirty&1&&r(3,u=(i==null?void 0:i.hash)===d),r(4,e=Object.fromEntries(Object.entries(t).filter(([,f])=>f!==void 0)))},t=ye(t),[i,m,c,u,e,M,a,n]}class it extends Ce{constructor(t){super(),we(this,t,rt,tt,Se,{data:0,emptySet:1,emptyMessage:2})}}export{it as C};
