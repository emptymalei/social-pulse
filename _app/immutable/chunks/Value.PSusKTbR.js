import{s as st,v as Ft,e as be,d as de,r as lt,f as E,i as p,j as v,k as Ne,z as Nt,A as qt,B as Gt,b as Bt,l as Hr,p as Ur,n as Z,I as It,a as fl,c as il,K as qe,L as Pt,t as Dt,u as Ot,V as Yr,E as $r,g as el}from"./scheduler.DGdCZZk7.js";import{S as nt,i as ot,t as S,b as w,g as Lr,d as Mr,c as G,a as V,m as X,e as H}from"./index.BbibI47o.js";import{N as rt,a3 as al,a4 as cl,a5 as Sr,a6 as Qr,g as tl,e as wr,h as zt,a7 as ml,i as ge,j as Fe,a8 as jt,k as J,O as yl,R as hl,l as rl,Q as ll,m as sl,n as nl,o as ol,a9 as gl,aa as bl}from"./VennDiagram.svelte_svelte_type_style_lang.JP0MNJs0.js";import{g as Rr,Q as Ge}from"./inferColumnTypes.CGBTXJlv.js";import{w as Kr}from"./entry.BnrBBfE1.js";import{E as dl}from"./ECharts.B70do6T5.js";function _l(l){let t,e,r,s;const n=l[2].default,u=Ft(n,l,l[1],null);return{c(){t=be("div"),e=be("div"),u&&u.c(),this.h()},l(i){t=de(i,"DIV",{class:!0,role:!0});var f=lt(t);e=de(f,"DIV",{});var m=lt(e);u&&u.l(m),m.forEach(E),f.forEach(E),this.h()},h(){p(t,"class",r="alert "+l[0]+" svelte-1w1ov1c"),p(t,"role","alert")},m(i,f){v(i,t,f),Ne(t,e),u&&u.m(e,null),s=!0},p(i,[f]){u&&u.p&&(!s||f&2)&&Nt(u,n,i,i[1],s?Gt(n,i[1],f,null):qt(i[1]),null),(!s||f&1&&r!==(r="alert "+i[0]+" svelte-1w1ov1c"))&&p(t,"class",r)},i(i){s||(S(u,i),s=!0)},o(i){w(u,i),s=!1},d(i){i&&E(t),u&&u.d(i)}}}const Cr={default:"base",danger:"negative",success:"positive"},xl=l=>Object.keys(Cr).includes(l),Tl=l=>xl(l)?(console.warn(`[Alert] The status "${l}" is deprecated. Please use "${Cr[l]}" instead.`),Cr[l]):l;function Al(l,t,e){let{$$slots:r={},$$scope:s}=t,{status:n="base"}=t;return l.$$set=u=>{"status"in u&&e(0,n=u.status),"$$scope"in u&&e(1,s=u.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&e(0,n=Tl(n))},[n,s,r]}class rs extends nt{constructor(t){super(),ot(this,t,Al,_l,st,{status:0})}}function Zr(l){return e=>e.map(r=>{var s;const n={},u=Object.keys(r);for(const i of u){const f=(s=l[i])!=null?s:i;n[f]=r[i]}return n})}function Wr(l){return e=>{const r=e.map(s=>({...s}));for(const s in l){const n=l[s],u=typeof n=="function"?n(r):n,i=u!=null&&u[Symbol.iterator]&&typeof u!="string"?u:e.map(()=>u);let f=-1;for(const m of r)m[s]=i[++f]}return r}}function Jr(l,t,e){return l==null||t==null?void 0:t===0&&l===0?0:!e&&t===0?void 0:l/t}function pr(l,t,e){const r=typeof l=="function"?l:i=>i[l],s=i=>i[t],{predicate:n,allowDivideByZero:u}={};return n==null?(i,f,m)=>{const y=s(i),_=r(i,f,m);return Jr(_,y,u)}:(i,f,m)=>{if(!n(i,f,m))return;const y=s(i),_=r(i,f,m);return Jr(_,y,u)}}function Sl(l,t){const e=new Set(l.map(r=>r[t]));return Array.from(e)}function kl(l,t){return rt(l,al({count:cl(t)}))[0].count}function wl(l,t,e){let r;if(typeof e!="object")r=rt(l,Rr(t,Wr({xTotal:Qr(e)})),Sr({percentOfX:pr(e,"xTotal")}),Zr({percentOfX:e+"_pct"}));else{r=rt(l,Sr({valueSum:0}));for(let s=0;s<r.length;s++){r[s].valueSum=0;for(let n=0;n<e.length;n++)r[s].valueSum=r[s].valueSum+r[s][e[n]]}r=rt(r,Rr(t,Wr({xTotal:Qr("valueSum")})));for(let s=0;s<e.length;s++)r=rt(r,Sr({percentOfX:pr(e[s],"xTotal")}),Zr({percentOfX:e[s]+"_pct"}))}return r}function kr(l,t,e){return[...l].sort((r,s)=>(r[t]<s[t]?-1:1)*(e?1:-1))}function Cl(l,t,e){const r=t+e;return l%r<t?0:1}function Ll(l){let t,e;return t=new rl({props:{error:l[14],title:l[8]}}),{c(){G(t.$$.fragment)},l(r){V(t.$$.fragment,r)},m(r,s){X(t,r,s),e=!0},p(r,s){const n={};s[0]&16384&&(n.error=r[14]),s[0]&256&&(n.title=r[8]),t.$set(n)},i(r){e||(S(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){H(t,r)}}}function Ml(l){let t,e,r;const s=l[132].default,n=Ft(s,l,l[131],null);return e=new dl({props:{config:l[20],height:l[15],width:l[13],data:l[0],queryID:l[5],evidenceChartTitle:l[7],showAllXAxisLabels:l[6],swapXY:l[2],echartsOptions:l[9],seriesOptions:l[10],printEchartsConfig:l[1],renderer:l[11],downloadableData:l[3],downloadableImage:l[4],connectGroup:l[12],seriesColors:l[16]}}),{c(){n&&n.c(),t=fl(),G(e.$$.fragment)},l(u){n&&n.l(u),t=il(u),V(e.$$.fragment,u)},m(u,i){n&&n.m(u,i),v(u,t,i),X(e,u,i),r=!0},p(u,i){n&&n.p&&(!r||i[4]&128)&&Nt(n,s,u,u[131],r?Gt(s,u[131],i,null):qt(u[131]),null);const f={};i[0]&1048576&&(f.config=u[20]),i[0]&32768&&(f.height=u[15]),i[0]&8192&&(f.width=u[13]),i[0]&1&&(f.data=u[0]),i[0]&32&&(f.queryID=u[5]),i[0]&128&&(f.evidenceChartTitle=u[7]),i[0]&64&&(f.showAllXAxisLabels=u[6]),i[0]&4&&(f.swapXY=u[2]),i[0]&512&&(f.echartsOptions=u[9]),i[0]&1024&&(f.seriesOptions=u[10]),i[0]&2&&(f.printEchartsConfig=u[1]),i[0]&2048&&(f.renderer=u[11]),i[0]&8&&(f.downloadableData=u[3]),i[0]&16&&(f.downloadableImage=u[4]),i[0]&4096&&(f.connectGroup=u[12]),i[0]&65536&&(f.seriesColors=u[16]),e.$set(f)},i(u){r||(S(n,u),S(e.$$.fragment,u),r=!0)},o(u){w(n,u),w(e.$$.fragment,u),r=!1},d(u){u&&E(t),n&&n.d(u),H(e,u)}}}function El(l){let t,e,r,s;const n=[Ml,Ll],u=[];function i(f,m){return f[14]?1:0}return t=i(l),e=u[t]=n[t](l),{c(){e.c(),r=Bt()},l(f){e.l(f),r=Bt()},m(f,m){u[t].m(f,m),v(f,r,m),s=!0},p(f,m){let y=t;t=i(f),t===y?u[t].p(f,m):(Lr(),w(u[y],1,1,()=>{u[y]=null}),Mr(),e=u[t],e?e.p(f,m):(e=u[t]=n[t](f),e.c()),S(e,1),e.m(r.parentNode,r))},i(f){s||(S(e),s=!0)},o(f){w(e),s=!1},d(f){f&&E(r),u[t].d(f)}}}function jl(l,t,e){let r,s,n,u,i,f=Z,m=()=>(f(),f=It(n,o=>e(127,i=o)),n),y,_,x=Z,T=()=>(x(),x=It(s,o=>e(129,_=o)),s),j,$=Z,_e=()=>($(),$=It(r,o=>e(130,j=o)),r),xe;l.$$.on_destroy.push(()=>f()),l.$$.on_destroy.push(()=>x()),l.$$.on_destroy.push(()=>$());let{$$slots:Ve={},$$scope:O}=t,I=Kr({}),b=Kr({});Hr(l,b,o=>e(20,xe=o));const{theme:ee,resolveColor:C,resolveColorsObject:ut,resolveColorPalette:ul}=tl();Hr(l,ee,o=>e(128,y=o));let{data:k=void 0}=t,{queryID:Er=void 0}=t,{x:A=void 0}=t,{y:c=void 0}=t,{y2:g=void 0}=t,{series:U=void 0}=t,{size:z=void 0}=t,{tooltipTitle:Xe=void 0}=t,{showAllXAxisLabels:jr=!1}=t,{printEchartsConfig:He=!1}=t,Vt=!!c,Xt=!!A,{swapXY:d=!1}=t,{title:ft=void 0}=t,{subtitle:it=void 0}=t,{chartType:at="Chart"}=t,{bubble:Ht=!1}=t,{hist:Ut=!1}=t,{boxplot:Yt=!1}=t,te,{xType:L=void 0}=t,{xAxisTitle:Y="false"}=t,{xBaseline:re=!0}=t,{xTickMarks:le=!1}=t,{xGridlines:se=!1}=t,{xAxisLabels:ne=!0}=t,{sort:oe=!0}=t,{xFmt:ct=void 0}=t,{xMin:mt=void 0}=t,{xMax:yt=void 0}=t,{yLog:Q=!1}=t,{yType:ht=Q===!0?"log":"value"}=t,{yLogBase:gt=10}=t,{yAxisTitle:B="false"}=t,{yBaseline:ue=!1}=t,{yTickMarks:fe=!1}=t,{yGridlines:ie=!0}=t,{yAxisLabels:ae=!0}=t,{yMin:Ue=void 0}=t,{yMax:bt=void 0}=t,{yScale:ce=!1}=t,{yFmt:Ye=void 0}=t,{yAxisColor:Qt="true"}=t,{y2AxisTitle:W="false"}=t,{y2Baseline:Te=!1}=t,{y2TickMarks:Ae=!1}=t,{y2Gridlines:Se=!0}=t,{y2AxisLabels:ke=!0}=t,{y2Min:dt=void 0}=t,{y2Max:Rt=void 0}=t,{y2Scale:we=!1}=t,{y2Fmt:Qe=void 0}=t,{y2AxisColor:Kt="true"}=t,{sizeFmt:_t=void 0}=t,{colorPalette:Zt="default"}=t,{legend:P=void 0}=t,{echartsOptions:Ir=void 0}=t,{seriesOptions:Dr=void 0}=t,{seriesColors:Wt=void 0}=t,{stackType:Jt=void 0}=t,{stacked100:Re=!1}=t,{chartAreaHeight:F}=t,{renderer:Or=void 0}=t,{downloadableData:Ke=!0}=t,{downloadableImage:Ze=!0}=t,{connectGroup:zr=void 0}=t,h,xt,Tt=[],Ce=[],pt,We,N,vt,q,M,R,At,$t,Je,St,er,kt,Le,tr,rr,pe,Me,lr,sr,nr,or,ur,fr,ir,ar,cr,mr,yr,Ee,ve,$e,wt,Ct,hr,gr,je,br,dr,Lt,Br,_r,me=[],Ie=!0,K=[],et=[],D,Mt,xr,ye;return l.$$set=o=>{"data"in o&&e(0,k=o.data),"queryID"in o&&e(5,Er=o.queryID),"x"in o&&e(23,A=o.x),"y"in o&&e(24,c=o.y),"y2"in o&&e(47,g=o.y2),"series"in o&&e(48,U=o.series),"size"in o&&e(49,z=o.size),"tooltipTitle"in o&&e(50,Xe=o.tooltipTitle),"showAllXAxisLabels"in o&&e(6,jr=o.showAllXAxisLabels),"printEchartsConfig"in o&&e(1,He=o.printEchartsConfig),"swapXY"in o&&e(2,d=o.swapXY),"title"in o&&e(7,ft=o.title),"subtitle"in o&&e(51,it=o.subtitle),"chartType"in o&&e(8,at=o.chartType),"bubble"in o&&e(52,Ht=o.bubble),"hist"in o&&e(53,Ut=o.hist),"boxplot"in o&&e(54,Yt=o.boxplot),"xType"in o&&e(25,L=o.xType),"xAxisTitle"in o&&e(26,Y=o.xAxisTitle),"xBaseline"in o&&e(27,re=o.xBaseline),"xTickMarks"in o&&e(28,le=o.xTickMarks),"xGridlines"in o&&e(29,se=o.xGridlines),"xAxisLabels"in o&&e(30,ne=o.xAxisLabels),"sort"in o&&e(31,oe=o.sort),"xFmt"in o&&e(55,ct=o.xFmt),"xMin"in o&&e(56,mt=o.xMin),"xMax"in o&&e(57,yt=o.xMax),"yLog"in o&&e(32,Q=o.yLog),"yType"in o&&e(58,ht=o.yType),"yLogBase"in o&&e(59,gt=o.yLogBase),"yAxisTitle"in o&&e(33,B=o.yAxisTitle),"yBaseline"in o&&e(34,ue=o.yBaseline),"yTickMarks"in o&&e(35,fe=o.yTickMarks),"yGridlines"in o&&e(36,ie=o.yGridlines),"yAxisLabels"in o&&e(37,ae=o.yAxisLabels),"yMin"in o&&e(60,Ue=o.yMin),"yMax"in o&&e(61,bt=o.yMax),"yScale"in o&&e(38,ce=o.yScale),"yFmt"in o&&e(62,Ye=o.yFmt),"yAxisColor"in o&&e(63,Qt=o.yAxisColor),"y2AxisTitle"in o&&e(39,W=o.y2AxisTitle),"y2Baseline"in o&&e(40,Te=o.y2Baseline),"y2TickMarks"in o&&e(41,Ae=o.y2TickMarks),"y2Gridlines"in o&&e(42,Se=o.y2Gridlines),"y2AxisLabels"in o&&e(43,ke=o.y2AxisLabels),"y2Min"in o&&e(64,dt=o.y2Min),"y2Max"in o&&e(65,Rt=o.y2Max),"y2Scale"in o&&e(44,we=o.y2Scale),"y2Fmt"in o&&e(66,Qe=o.y2Fmt),"y2AxisColor"in o&&e(67,Kt=o.y2AxisColor),"sizeFmt"in o&&e(68,_t=o.sizeFmt),"colorPalette"in o&&e(69,Zt=o.colorPalette),"legend"in o&&e(45,P=o.legend),"echartsOptions"in o&&e(9,Ir=o.echartsOptions),"seriesOptions"in o&&e(10,Dr=o.seriesOptions),"seriesColors"in o&&e(70,Wt=o.seriesColors),"stackType"in o&&e(71,Jt=o.stackType),"stacked100"in o&&e(72,Re=o.stacked100),"chartAreaHeight"in o&&e(46,F=o.chartAreaHeight),"renderer"in o&&e(11,Or=o.renderer),"downloadableData"in o&&e(3,Ke=o.downloadableData),"downloadableImage"in o&&e(4,Ze=o.downloadableImage),"connectGroup"in o&&e(12,zr=o.connectGroup),"$$scope"in o&&e(131,O=o.$$scope)},l.$$.update=()=>{var o,Pr,Fr,Nr,qr,Gr;if(l.$$.dirty[0]&2&&e(1,He=He==="true"||He===!0),l.$$.dirty[0]&4&&(d==="true"||d===!0?e(2,d=!0):e(2,d=!1)),l.$$.dirty[0]&134217728&&e(27,re=re==="true"||re===!0),l.$$.dirty[0]&268435456&&e(28,le=le==="true"||le===!0),l.$$.dirty[0]&536870912&&e(29,se=se==="true"||se===!0),l.$$.dirty[0]&1073741824&&e(30,ne=ne==="true"||ne===!0),l.$$.dirty[1]&1&&e(31,oe=oe==="true"||oe===!0),l.$$.dirty[1]&2&&e(32,Q=Q==="true"||Q===!0),l.$$.dirty[1]&8&&e(34,ue=ue==="true"||ue===!0),l.$$.dirty[1]&16&&e(35,fe=fe==="true"||fe===!0),l.$$.dirty[1]&32&&e(36,ie=ie==="true"||ie===!0),l.$$.dirty[1]&64&&e(37,ae=ae==="true"||ae===!0),l.$$.dirty[1]&128&&e(38,ce=ce==="true"||ce===!0),l.$$.dirty[2]&2&&_e(e(19,r=C(Qt))),l.$$.dirty[1]&512&&e(40,Te=Te==="true"||Te===!0),l.$$.dirty[1]&1024&&e(41,Ae=Ae==="true"||Ae===!0),l.$$.dirty[1]&2048&&e(42,Se=Se==="true"||Se===!0),l.$$.dirty[1]&4096&&e(43,ke=ke==="true"||ke===!0),l.$$.dirty[1]&8192&&e(44,we=we==="true"||we===!0),l.$$.dirty[2]&32&&T(e(18,s=C(Kt))),l.$$.dirty[2]&128&&m(e(17,n=ul(Zt))),l.$$.dirty[2]&256&&e(16,u=ut(Wt)),l.$$.dirty[0]&8&&e(3,Ke=Ke==="true"||Ke===!0),l.$$.dirty[0]&16&&e(4,Ze=Ze==="true"||Ze===!0),l.$$.dirty[0]&2139120005|l.$$.dirty[1]&2147483647|l.$$.dirty[2]&2147483229|l.$$.dirty[3]&2147483647|l.$$.dirty[4]&127)try{if(e(14,Mt=void 0),e(120,me=[]),e(79,Ce=[]),e(122,K=[]),e(123,et=[]),e(81,We=[]),e(73,Vt=!!c),e(74,Xt=!!A),wr(k),e(76,h=zt(k)),e(77,xt=Object.keys(h)),Xt||e(23,A=xt[0]),!Vt){e(78,Tt=xt.filter(function(a){return![A,U,z].includes(a)}));for(let a=0;a<Tt.length;a++)e(81,We=Tt[a]),e(80,pt=h[We].type),pt==="number"&&Ce.push(We);e(24,c=Ce.length>1?Ce:Ce[0])}Ht?e(75,te={x:A,y:c,size:z}):Ut?e(75,te={x:A}):Yt?e(75,te={}):e(75,te={x:A,y:c});for(let a in te)te[a]==null&&me.push(a);if(me.length===1)throw Error(new Intl.ListFormat().format(me)+" is required");if(me.length>1)throw Error(new Intl.ListFormat().format(me)+" are required");if(Re===!0&&c.includes("_pct")&&Ie===!1)if(typeof c=="object"){for(let a=0;a<c.length;a++)e(24,c[a]=c[a].replace("_pct",""),c);e(121,Ie=!1)}else e(24,c=c.replace("_pct","")),e(121,Ie=!1);if(A&&K.push(A),c)if(typeof c=="object")for(e(124,D=0);D<c.length;e(124,D++,D))K.push(c[D]);else K.push(c);if(g)if(typeof g=="object")for(e(124,D=0);D<g.length;e(124,D++,D))K.push(g[D]);else K.push(g);if(z&&K.push(z),U&&et.push(U),Xe&&et.push(Xe),wr(k,K,et),Re===!0){if(e(0,k=wl(k,A,c)),typeof c=="object"){for(let a=0;a<c.length;a++)e(24,c[a]=c[a]+"_pct",c);e(121,Ie=!1)}else e(24,c=c+"_pct"),e(121,Ie=!1);e(76,h=zt(k))}switch(e(82,N=h[A].type),N){case"number":e(82,N="value");break;case"string":e(82,N="category");break;case"date":e(82,N="time");break;default:break}if(e(25,L=L==="category"?"category":N),d&&L!=="category")throw Error("Horizontal charts do not support a value or time-based x-axis. You can either change your SQL query to output string values or set swapXY=false.");if(d&&g)throw Error("Horizontal charts do not support a secondary y-axis. You can either set swapXY=false or remove the y2 prop from your chart.");if(d&&e(25,L="category"),e(83,vt=N==="value"&&L==="category"),e(0,k=oe?N==="category"?kr(k,c,!1):kr(k,A,!0):k),N==="time"&&e(0,k=kr(k,A,!0)),e(125,xr=zt(k,"array")),e(126,ye=xr.filter(a=>a.type==="date")),e(126,ye=ye.map(a=>a.id)),ye.length>0)for(let a=0;a<ye.length;a++)e(0,k=ml(k,ye[a]));ct?e(84,q=ge(ct,(o=h[A].format)==null?void 0:o.valueType)):e(84,q=h[A].format),c?Ye?typeof c=="object"?e(85,M=ge(Ye,(Pr=h[c[0]].format)==null?void 0:Pr.valueType)):e(85,M=ge(Ye,(Fr=h[c].format)==null?void 0:Fr.valueType)):typeof c=="object"?e(85,M=h[c[0]].format):e(85,M=h[c].format):e(85,M="str"),g&&(Qe?typeof g=="object"?e(86,R=ge(Qe,(Nr=h[g[0]].format)==null?void 0:Nr.valueType)):e(86,R=ge(Qe,(qr=h[g].format)==null?void 0:qr.valueType)):typeof g=="object"?e(86,R=h[g[0]].format):e(86,R=h[g].format)),z&&(_t?e(87,At=ge(_t,(Gr=h[z].format)==null?void 0:Gr.valueType)):e(87,At=h[z].format)),e(88,$t=h[A].columnUnitSummary),c&&(typeof c=="object"?e(89,Je=h[c[0]].columnUnitSummary):e(89,Je=h[c].columnUnitSummary)),g&&(typeof g=="object"?e(90,St=h[g[0]].columnUnitSummary):e(90,St=h[g].columnUnitSummary)),e(26,Y=Y==="true"?Fe(A,q):Y==="false"?"":Y),e(33,B=B==="true"?typeof c=="object"?"":Fe(c,M):B==="false"?"":B),e(39,W=W==="true"?typeof g=="object"?"":Fe(g,R):W==="false"?"":W);let De=typeof c=="object"?c.length:1,Vr=U?kl(k,U):1,tt=De*Vr,Tr=typeof g=="object"?g.length:g?1:0,Ar=tt+Tr;if(P!==void 0&&e(45,P=P==="true"||P===!0),e(45,P=P??Ar>1),Re===!0&&Q===!0)throw Error("Log axis cannot be used in a 100% stacked chart");if(Jt==="stacked"&&Ar>1&&Q===!0)throw Error("Log axis cannot be used in a stacked chart");let Oe;if(typeof c=="object"){Oe=h[c[0]].columnUnitSummary.min;for(let a=0;a<c.length;a++)h[c[a]].columnUnitSummary.min<Oe&&(Oe=h[c[a]].columnUnitSummary.min)}else c&&(Oe=h[c].columnUnitSummary.min);if(Q===!0&&Oe<=0&&Oe!==null)throw Error("Log axis cannot display values less than or equal to zero");I.update(a=>({...a,data:k,x:A,y:c,y2:g,series:U,swapXY:d,sort:oe,xType:L,xFormat:q,yFormat:M,y2Format:R,sizeFormat:At,xMismatch:vt,size:z,yMin:Ue,y2Min:dt,columnSummary:h,xAxisTitle:Y,yAxisTitle:B,y2AxisTitle:W,tooltipTitle:Xe,chartAreaHeight:F,chartType:at,yCount:De,y2Count:Tr})),e(91,er=Sl(k,A));let Xr;if(d?e(92,kt={type:ht,logBase:gt,position:"top",axisLabel:{show:ae,hideOverlap:!0,showMaxLabel:!0,formatter(a){return jt(a,M,Je)},margin:4},min:Ue,max:bt,scale:ce,splitLine:{show:ie},axisLine:{show:ue,onZero:!1},axisTick:{show:fe},boundaryGap:!1,z:2}):e(92,kt={type:L,min:mt,max:yt,splitLine:{show:se},axisLine:{show:re},axisTick:{show:le},axisLabel:{show:ne,hideOverlap:!0,showMaxLabel:L==="category"||L==="value",formatter:L==="time"||L==="category"?!1:function(a){return jt(a,q,$t)},margin:6},scale:!0,z:2}),d?e(93,Le={type:L,inverse:"true",splitLine:{show:se},axisLine:{show:re},axisTick:{show:le},axisLabel:{show:ne,hideOverlap:!0},scale:!0,min:mt,max:yt,z:2}):(e(93,Le={type:ht,logBase:gt,splitLine:{show:ie},axisLine:{show:ue,onZero:!1},axisTick:{show:fe},axisLabel:{show:ae,hideOverlap:!0,margin:4,formatter(a){return jt(a,M,Je)},color:g?j==="true"?i[0]:j!=="false"?j:void 0:void 0},name:B,nameLocation:"end",nameTextStyle:{align:"left",verticalAlign:"top",padding:[0,5,0,0],color:g?j==="true"?i[0]:j!=="false"?j:void 0:void 0},nameGap:6,min:Ue,max:bt,scale:ce,boundaryGap:["0%","1%"],z:2}),Xr={type:"value",show:!1,alignTicks:!0,splitLine:{show:Se},axisLine:{show:Te,onZero:!1},axisTick:{show:Ae},axisLabel:{show:ke,hideOverlap:!0,margin:4,formatter(a){return jt(a,R,St)},color:_==="true"?i[tt]:_!=="false"?_:void 0},name:W,nameLocation:"end",nameTextStyle:{align:"right",verticalAlign:"top",padding:[0,0,0,5],color:_==="true"?i[tt]:_!=="false"?_:void 0},nameGap:6,min:dt,max:Rt,scale:we,boundaryGap:["0%","1%"],z:2},e(93,Le=[Le,Xr])),F){if(e(46,F=Number(F)),isNaN(F))throw Error("chartAreaHeight must be a number");if(F<=0)throw Error("chartAreaHeight must be a positive number")}else e(46,F=180);e(96,pe=!!ft),e(97,Me=!!it),e(98,lr=P*(U!==null||typeof c=="object"&&c.length>1)),e(99,sr=B!==""&&d),e(100,nr=Y!==""&&!d),e(101,or=15),e(102,ur=13),e(103,fr=6*Me),e(104,ir=pe*or+Me*ur+fr*Math.max(pe,Me)),e(105,ar=10),e(106,cr=8),e(107,mr=14),e(108,yr=14),e(109,Ee=15),e(109,Ee=Ee*lr),e(110,ve=7),e(110,ve=ve*Math.max(pe,Me)),e(111,$e=ir+ve),e(112,wt=$e+Ee+yr*sr+ar),e(113,Ct=nr*mr+cr),e(117,br=8),e(119,Lt=1),d&&(e(118,dr=er.length),e(119,Lt=Math.max(1,dr/br))),e(114,hr=F*Lt+wt+Ct),e(115,gr=$e+Ee+7),e(15,Br=hr+"px"),e(13,_r="100%"),e(116,je=d?B:Y),je!==""&&e(116,je=je+" →"),e(94,tr={id:"horiz-axis-title",type:"text",style:{text:je,textAlign:"right",fill:y.colors["base-content-muted"]},cursor:"auto",right:d?"2%":"3%",top:d?gr:null,bottom:d?null:"2%"}),e(95,rr={title:{text:ft,subtext:it,subtextStyle:{width:_r}},tooltip:{trigger:"axis",formatter(a){let ze,Be,Pe,Et;if(Ar>1){Be=a[0].value[d?1:0],ze=`<span id="tooltip" style='font-weight: 600;'>${J(Be,q)}</span>`;for(let he=a.length-1;he>=0;he--)a[he].seriesName!=="stackTotal"&&(Pe=a[he].value[d?0:1],ze=ze+`<br> <span style='font-size: 11px;'>${a[he].marker} ${a[he].seriesName}<span/><span style='float:right; margin-left: 10px; font-size: 12px;'>${J(Pe,Cl(a[he].componentIndex,De,Tr)===0?M:R)}</span>`)}else L==="value"?(Be=a[0].value[d?1:0],Pe=a[0].value[d?0:1],Et=a[0].seriesName,ze=`<span id="tooltip" style='font-weight: 600;'>${Fe(A,q)}: </span><span style='float:right; margin-left: 10px;'>${J(Be,q)}</span><br/><span style='font-weight: 600;'>${Fe(Et,M)}: </span><span style='float:right; margin-left: 10px;'>${J(Pe,M)}</span>`):(Be=a[0].value[d?1:0],Pe=a[0].value[d?0:1],Et=a[0].seriesName,ze=`<span id="tooltip" style='font-weight: 600;'>${J(Be,q)}</span><br/><span>${Fe(Et,M)}: </span><span style='float:right; margin-left: 10px;'>${J(Pe,M)}</span>`);return ze},confine:!0,axisPointer:{type:"shadow"},extraCssText:'box-shadow: 0 3px 6px rgba(0,0,0,.15); box-shadow: 0 2px 4px rgba(0,0,0,.12); z-index: 1; font-feature-settings: "cv02", "tnum";',order:"valueDesc"},legend:{show:P,type:"scroll",top:$e,padding:[0,0,0,0],data:[]},grid:{left:"0.5%",right:d?"4%":"3%",bottom:Ct,top:wt,containLabel:!0},xAxis:kt,yAxis:Le,series:[],animation:!0,graphic:tr,color:i}),b.update(()=>rr)}catch(De){e(14,Mt=De.message),console.error("\x1B[31m%s\x1B[0m",`Error in ${at}: ${De.message}`),I.update(tt=>({...tt,error:Mt}))}l.$$.dirty[0]&1},Ur(yl,I),Ur(hl,b),[k,He,d,Ke,Ze,Er,jr,ft,at,Ir,Dr,Or,zr,_r,Mt,Br,u,n,s,r,xe,b,ee,A,c,L,Y,re,le,se,ne,oe,Q,B,ue,fe,ie,ae,ce,W,Te,Ae,Se,ke,we,P,F,g,U,z,Xe,it,Ht,Ut,Yt,ct,mt,yt,ht,gt,Ue,bt,Ye,Qt,dt,Rt,Qe,Kt,_t,Zt,Wt,Jt,Re,Vt,Xt,te,h,xt,Tt,Ce,pt,We,N,vt,q,M,R,At,$t,Je,St,er,kt,Le,tr,rr,pe,Me,lr,sr,nr,or,ur,fr,ir,ar,cr,mr,yr,Ee,ve,$e,wt,Ct,hr,gr,je,br,dr,Lt,me,Ie,K,et,D,xr,ye,i,y,_,j,O,Ve]}class Il extends nt{constructor(t){super(),ot(this,t,jl,El,st,{data:0,queryID:5,x:23,y:24,y2:47,series:48,size:49,tooltipTitle:50,showAllXAxisLabels:6,printEchartsConfig:1,swapXY:2,title:7,subtitle:51,chartType:8,bubble:52,hist:53,boxplot:54,xType:25,xAxisTitle:26,xBaseline:27,xTickMarks:28,xGridlines:29,xAxisLabels:30,sort:31,xFmt:55,xMin:56,xMax:57,yLog:32,yType:58,yLogBase:59,yAxisTitle:33,yBaseline:34,yTickMarks:35,yGridlines:36,yAxisLabels:37,yMin:60,yMax:61,yScale:38,yFmt:62,yAxisColor:63,y2AxisTitle:39,y2Baseline:40,y2TickMarks:41,y2Gridlines:42,y2AxisLabels:43,y2Min:64,y2Max:65,y2Scale:44,y2Fmt:66,y2AxisColor:67,sizeFmt:68,colorPalette:69,legend:45,echartsOptions:9,seriesOptions:10,seriesColors:70,stackType:71,stacked100:72,chartAreaHeight:46,renderer:11,downloadableData:3,downloadableImage:4,connectGroup:12},null,[-1,-1,-1,-1,-1])}}function Dl(l){let t;const e=l[6].default,r=Ft(e,l,l[7],null);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,n){r&&r.m(s,n),t=!0},p(s,n){r&&r.p&&(!t||n&128)&&Nt(r,e,s,s[7],t?Gt(e,s[7],n,null):qt(s[7]),null)},i(s){t||(S(r,s),t=!0)},o(s){w(r,s),t=!1},d(s){r&&r.d(s)}}}function Ol(l){let t,e;const r=[l[4],{data:Ge.isQuery(l[10])?Array.from(l[10]):l[10]},{queryID:l[5]}];let s={$$slots:{default:[Dl]},$$scope:{ctx:l}};for(let n=0;n<r.length;n+=1)s=qe(s,r[n]);return t=new Il({props:s}),{c(){G(t.$$.fragment)},l(n){V(t.$$.fragment,n)},m(n,u){X(t,n,u),e=!0},p(n,u){const i=u&1072?sl(r,[u&16&&nl(n[4]),u&1024&&{data:Ge.isQuery(n[10])?Array.from(n[10]):n[10]},u&32&&{queryID:n[5]}]):{};u&128&&(i.$$scope={dirty:u,ctx:n}),t.$set(i)},i(n){e||(S(t.$$.fragment,n),e=!0)},o(n){w(t.$$.fragment,n),e=!1},d(n){H(t,n)}}}function zl(l){let t,e;return t=new ol({props:{slot:"empty",emptyMessage:l[2],emptySet:l[1],chartType:l[4].chartType,isInitial:l[3]}}),{c(){G(t.$$.fragment)},l(r){V(t.$$.fragment,r)},m(r,s){X(t,r,s),e=!0},p(r,s){const n={};s&4&&(n.emptyMessage=r[2]),s&2&&(n.emptySet=r[1]),s&16&&(n.chartType=r[4].chartType),s&8&&(n.isInitial=r[3]),t.$set(n)},i(r){e||(S(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){H(t,r)}}}function Bl(l){let t,e;return t=new rl({props:{slot:"error",title:l[4].chartType,error:l[10].error.message}}),{c(){G(t.$$.fragment)},l(r){V(t.$$.fragment,r)},m(r,s){X(t,r,s),e=!0},p(r,s){const n={};s&16&&(n.title=r[4].chartType),s&1024&&(n.error=r[10].error.message),t.$set(n)},i(r){e||(S(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){H(t,r)}}}function Pl(l){let t,e;return t=new ll({props:{data:l[0],$$slots:{error:[Bl,({loaded:r})=>({10:r}),({loaded:r})=>r?1024:0],empty:[zl],default:[Ol,({loaded:r})=>({10:r}),({loaded:r})=>r?1024:0]},$$scope:{ctx:l}}}),{c(){G(t.$$.fragment)},l(r){V(t.$$.fragment,r)},m(r,s){X(t,r,s),e=!0},p(r,[s]){const n={};s&1&&(n.data=r[0]),s&1182&&(n.$$scope={dirty:s,ctx:r}),t.$set(n)},i(r){e||(S(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){H(t,r)}}}function Fl(l,t,e){let r,{$$slots:s={},$$scope:n}=t,{data:u}=t;const i=Ge.isQuery(u)?u.hash:void 0;let f=(u==null?void 0:u.hash)===i,{emptySet:m=void 0}=t,{emptyMessage:y=void 0}=t,_=u==null?void 0:u.id;return l.$$set=x=>{e(9,t=qe(qe({},t),Pt(x))),"data"in x&&e(0,u=x.data),"emptySet"in x&&e(1,m=x.emptySet),"emptyMessage"in x&&e(2,y=x.emptyMessage),"$$scope"in x&&e(7,n=x.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&e(3,f=(u==null?void 0:u.hash)===i),e(4,r={...Object.fromEntries(Object.entries(t).filter(([,x])=>x!==void 0))})},t=Pt(t),[u,m,y,f,r,_,s,n]}class ls extends nt{constructor(t){super(),ot(this,t,Fl,Pl,st,{data:0,emptySet:1,emptyMessage:2})}}function Nl(l){let t,e;return t=new bl({props:{error:l[2]}}),{c(){G(t.$$.fragment)},l(r){V(t.$$.fragment,r)},m(r,s){X(t,r,s),e=!0},p(r,s){const n={};s&4&&(n.error=r[2]),t.$set(n)},i(r){e||(S(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){H(t,r)}}}function ql(l){let t,e=J(l[1],l[3])+"",r;return{c(){t=be("span"),r=Dt(e),this.h()},l(s){t=de(s,"SPAN",{style:!0});var n=lt(t);r=Ot(n,e),n.forEach(E),this.h()},h(){Yr(t,"color",l[4])},m(s,n){v(s,t,n),Ne(t,r)},p(s,n){n&10&&e!==(e=J(s[1],s[3])+"")&&$r(r,e),n&16&&Yr(t,"color",s[4])},i:Z,o:Z,d(s){s&&E(t)}}}function Gl(l){let t,e,r,s,n,u="Placeholder: no data currently referenced.";return{c(){t=be("span"),e=Dt("["),r=Dt(l[0]),s=Dt("]"),n=be("span"),n.textContent=u,this.h()},l(i){t=de(i,"SPAN",{class:!0});var f=lt(t);e=Ot(f,"["),r=Ot(f,l[0]),s=Ot(f,"]"),n=de(f,"SPAN",{class:!0,"data-svelte-h":!0}),el(n)!=="svelte-ddarzq"&&(n.textContent=u),f.forEach(E),this.h()},h(){p(n,"class","error-msg svelte-1qvl5jp"),p(t,"class","placeholder svelte-1qvl5jp")},m(i,f){v(i,t,f),Ne(t,e),Ne(t,r),Ne(t,s),Ne(t,n)},p(i,f){f&1&&$r(r,i[0])},i:Z,o:Z,d(i){i&&E(t)}}}function Vl(l){let t,e,r,s;const n=[Gl,ql,Nl],u=[];function i(f,m){return f[0]?0:f[2]?2:1}return t=i(l),e=u[t]=n[t](l),{c(){e.c(),r=Bt()},l(f){e.l(f),r=Bt()},m(f,m){u[t].m(f,m),v(f,r,m),s=!0},p(f,[m]){let y=t;t=i(f),t===y?u[t].p(f,m):(Lr(),w(u[y],1,1,()=>{u[y]=null}),Mr(),e=u[t],e?e.p(f,m):(e=u[t]=n[t](f),e.c()),S(e,1),e.m(r.parentNode,r))},i(f){s||(S(e),s=!0)},o(f){w(e),s=!1},d(f){f&&E(r),u[t].d(f)}}}function Xl(l,t,e){let r,s,n=Z,u=()=>(n(),n=It(r,b=>e(14,s=b)),r);l.$$.on_destroy.push(()=>n());const{resolveColor:i}=tl();let{data:f=null}=t,{row:m=0}=t,{column:y=null}=t,{value:_=null}=t,{placeholder:x=null}=t,{fmt:T=void 0}=t,j,$,_e,{color:xe=void 0}=t,Ve="",{redNegatives:O=!1}=t,I;return l.$$set=b=>{"data"in b&&e(6,f=b.data),"row"in b&&e(9,m=b.row),"column"in b&&e(7,y=b.column),"value"in b&&e(10,_=b.value),"placeholder"in b&&e(0,x=b.placeholder),"fmt"in b&&e(11,T=b.fmt),"color"in b&&e(12,xe=b.color),"redNegatives"in b&&e(8,O=b.redNegatives)},l.$$.update=()=>{var b;if(l.$$.dirty&1152&&e(7,y=y??_),l.$$.dirty&10949)try{if(e(2,_e=void 0),!x)if(f){if(typeof f=="string")throw Error(`Received: data=${f}, expected: data={${f}}`);if(Array.isArray(f)||e(6,f=[f]),isNaN(m))throw Error("row must be a number (row="+m+")");try{Object.keys(f[m])[0]}catch{throw Error("Row "+m+" does not exist in the dataset")}e(7,y=y??Object.keys(f[m])[0]),wr(f,[y]),e(13,I=zt(f,"array"));const ee=I.filter(C=>{var ut;return C.type==="date"&&!(((ut=f[0])==null?void 0:ut[C.id])instanceof Date)}).map(C=>C.id);for(let C=0;C<ee.length;C++)e(6,f=gl(f,ee[C]));e(1,$=f[m][y]),e(13,I=I.filter(C=>C.id===y)),T?e(3,j=ge(T,(b=I[0].format)==null?void 0:b.valueType)):e(3,j=I[0].format)}else throw Error("No data provided. If you referenced a query result, check that the name is correct.")}catch(ee){e(2,_e=ee.message),console.error("\x1B[31m%s\x1B[0m",`Error in Value: ${_e}`)}l.$$.dirty&1152&&_&&y&&console.warn('Both "value" and "column" were supplied as props to Value. "value" will be ignored.'),l.$$.dirty&4096&&u(e(5,r=i(xe))),l.$$.dirty&256&&e(8,O=O==="true"||O===!0),l.$$.dirty&16642&&(O||s)&&(O&&$<0?e(4,Ve="rgb(220 38 38)"):s&&e(4,Ve=s))},[x,$,_e,j,Ve,r,f,y,O,m,_,T,xe,I,s]}class Hl extends nt{constructor(t){super(),ot(this,t,Xl,Vl,st,{data:6,row:9,column:7,value:10,placeholder:0,fmt:11,color:12,redNegatives:8})}}function Ul(l){let t;const e=l[7].default,r=Ft(e,l,l[8],null);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,n){r&&r.m(s,n),t=!0},p(s,n){r&&r.p&&(!t||n&256)&&Nt(r,e,s,s[8],t?Gt(e,s[8],n,null):qt(s[8]),null)},i(s){t||(S(r,s),t=!0)},o(s){w(r,s),t=!1},d(s){r&&r.d(s)}}}function Yl(l){let t,e;const r=[l[4],{data:Ge.isQuery(l[11])?Array.from(l[11]):l[11]}];let s={$$slots:{default:[Ul]},$$scope:{ctx:l}};for(let n=0;n<r.length;n+=1)s=qe(s,r[n]);return t=new Hl({props:s}),{c(){G(t.$$.fragment)},l(n){V(t.$$.fragment,n)},m(n,u){X(t,n,u),e=!0},p(n,u){const i=u&2064?sl(r,[u&16&&nl(n[4]),u&2048&&{data:Ge.isQuery(n[11])?Array.from(n[11]):n[11]}]):{};u&256&&(i.$$scope={dirty:u,ctx:n}),t.$set(i)},i(n){e||(S(t.$$.fragment,n),e=!0)},o(n){w(t.$$.fragment,n),e=!1},d(n){H(t,n)}}}function vr(l){let t,e;return t=new ol({props:{emptyMessage:l[2],emptySet:l[1],chartType:Zl,isInitial:l[3]}}),{c(){G(t.$$.fragment)},l(r){V(t.$$.fragment,r)},m(r,s){X(t,r,s),e=!0},p(r,s){const n={};s&4&&(n.emptyMessage=r[2]),s&2&&(n.emptySet=r[1]),s&8&&(n.isInitial=r[3]),t.$set(n)},i(r){e||(S(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){H(t,r)}}}function Ql(l){let t,e,r=!l[4].placeholder&&vr(l);return{c(){t=be("span"),r&&r.c(),this.h()},l(s){t=de(s,"SPAN",{slot:!0});var n=lt(t);r&&r.l(n),n.forEach(E),this.h()},h(){p(t,"slot","empty")},m(s,n){v(s,t,n),r&&r.m(t,null),e=!0},p(s,n){s[4].placeholder?r&&(Lr(),w(r,1,1,()=>{r=null}),Mr()):r?(r.p(s,n),n&16&&S(r,1)):(r=vr(s),r.c(),S(r,1),r.m(t,null))},i(s){e||(S(r),e=!0)},o(s){w(r),e=!1},d(s){s&&E(t),r&&r.d()}}}function Rl(l){let t,e="Loading...";return{c(){t=be("span"),t.textContent=e,this.h()},l(r){t=de(r,"SPAN",{slot:!0,class:!0,"data-svelte-h":!0}),el(t)!=="svelte-89gxhc"&&(t.textContent=e),this.h()},h(){p(t,"slot","skeleton"),p(t,"class","text-base-content-muted")},m(r,s){v(r,t,s)},p:Z,d(r){r&&E(t)}}}function Kl(l){let t,e;return t=new ll({props:{data:l[0],$$slots:{skeleton:[Rl],empty:[Ql],default:[Yl,({loaded:r})=>({11:r}),({loaded:r})=>r?2048:0]},$$scope:{ctx:l}}}),{c(){G(t.$$.fragment)},l(r){V(t.$$.fragment,r)},m(r,s){X(t,r,s),e=!0},p(r,[s]){const n={};s&1&&(n.data=r[0]),s&2334&&(n.$$scope={dirty:s,ctx:r}),t.$set(n)},i(r){e||(S(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){H(t,r)}}}let Zl="Value";function Wl(l,t,e){let r,{$$slots:s={},$$scope:n}=t,{data:u}=t,{column:i}=t,{agg:f}=t;const m=Ge.isQuery(u)?u.hash:void 0;let y=(u==null?void 0:u.hash)===m,{emptySet:_=void 0}=t,{emptyMessage:x=void 0}=t;return l.$$set=T=>{e(10,t=qe(qe({},t),Pt(T))),"data"in T&&e(0,u=T.data),"column"in T&&e(5,i=T.column),"agg"in T&&e(6,f=T.agg),"emptySet"in T&&e(1,_=T.emptySet),"emptyMessage"in T&&e(2,x=T.emptyMessage),"$$scope"in T&&e(8,n=T.$$scope)},l.$$.update=()=>{l.$$.dirty&97&&f&&e(0,u=u.groupBy(void 0).agg({[f]:{col:i,as:i}})),l.$$.dirty&1&&e(3,y=(u==null?void 0:u.hash)===m),e(4,r=Object.fromEntries(Object.entries(t).filter(([,T])=>T!==void 0)))},t=Pt(t),[u,_,x,y,r,i,f,s,n]}class ss extends nt{constructor(t){super(),ot(this,t,Wl,Kl,st,{data:0,column:5,agg:6,emptySet:1,emptyMessage:2})}}export{rs as A,ls as C,ss as V,Sl as g};
